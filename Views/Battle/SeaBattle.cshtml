@model BattleShits.Models.BattleField

@{
    ViewData["Title"] = "SeaBattle";
}

<h1>SeaBattle, Here you will be able to see your battle at sea</h1>

<p>@ViewBag.Message</p>


<h2>Placera dina skepp</h2>
<form method="post" asp-action="PlaceShip">
    <input type="number" name="x" placeholder="X-koordinat" required />
    <input type="number" name="y" placeholder="Y-koordinat" required />
    <button type="submit">Placera skepp</button>
</form>
<h2>Placera ett dubbelskepp</h2>
<form method="post" asp-action="PlaceDoubleShip">
    <label for="orientation">Orientering:</label>
    <select id="orientation" name="orientation" required>
        <option value="horizontal">Vert</option>
        <option value="vertical">whore</option> 
    </select>
    <label for="x">Startkoordinat X:</label>
    <input type="number" id="x" name="x" min="0" max="2" required />
    <label for="y">Startkoordinat Y:</label>
    <input type="number" id="y" name="y" min="0" max="2" required />
    <button type="submit">Placera skepp</button>
</form>

<h3>Robotbräde</h3>
<table>
    @for (int i = 0; i < Model.RobotBoard.GetLength(0); i++)
    {
        <tr>
            @for (int j = 0; j < Model.RobotBoard.GetLength(1); j++)
            {
                string cellContent = Model.RobotBoard[i, j] == 1 ? "🚢" : "🌊";
                <td>@cellContent</td>
            }
        </tr>
    }
</table>

<table>
    @for (int i = 0; i < Model.PlayerBoard.GetLength(0); i++)
    {
        <tr>
            @for (int j = 0; j < Model.PlayerBoard.GetLength(1); j++)
            {
                <td style="width: 30px; height: 30px; text-align: center; border: 1px solid black;">
                    @if (Model.PlayerBoard[i, j] == 3)
                    {
                        <span>💧</span>
                        // Vatten
                    }
                   
                    else if (Model.PlayerBoard[i, j] == 2)
                    {
                        <span>🔥</span>
                        // Träff
                    }
                    else
                    {
                        <span>🌊</span>
                        // Miss
                    }
                </td>
            }
        </tr>
    }
</table>

<h3>Spelarbräde</h3>
<table>
    @for (int i = 0; i < Model.PlayerBoard.GetLength(0); i++)
    {
        <tr>
            @for (int j = 0; j < Model.PlayerBoard.GetLength(1); j++)
            {
                string cellContent = Model.PlayerBoard[i, j] == 1 ? "🚢" : "🌊";
                <td>@cellContent</td>
            }
        </tr>
    }
</table>

<table>
    @for (int i = 0; i < Model.RobotBoard.GetLength(0); i++)
    {
        <tr>
            @for (int j = 0; j < Model.RobotBoard.GetLength(1); j++)
            {
                <td style="width: 100px; height: 100px; text-align: center; border: 1px solid black; cursor: pointer;"
                    onclick="fire(@i, @j)">
                    @if (Model.RobotBoard[i, j] == 3)
                    {
                        <span>💧</span>
                    }
                    else if (Model.RobotBoard[i, j] == 2)
                    {
                        <span>🔥</span>
                    }
                    else
                    {
                        <span>🌊</span>
                    }
                </td>
            }
        </tr>
    }
</table>


<form id="fireForm" method="post" asp-action="Fire" style="display: none;">
    <input type="hidden" id="x" name="x" />
    <input type="hidden" id="y" name="y" />
</form>

<script>
       function fire(x, y) {
     
        document.getElementById("x").value = x;
        document.getElementById("y").value = y;
        document.getElementById("fireForm").submit();
    }

</script>

